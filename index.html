<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FOMA — Give & Get Baby Items</title>
  <meta name="description" content="FOMA — cozy place to buy or donate baby items." />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Patrick+Hand&display=swap" rel="stylesheet">

  <!-- Embedded CSS (keeps your original variables + adds small UI pieces) -->
  <style>
  :root{
    --bg:#fff9f2;--paper:#ffffff;--muted:#fbf1ef;--accent:#ffd7e0;--primary:#ff9bb3;
    --accent-2:#ffd6b3;--ink:#2b2b2b;--muted-ink:#6b6b6b;--text:#2b2b2b;--container-max:1200px;
    --radius-xl:22px;--radius-lg:18px;--radius-md:12px;--radius-sm:8px;
    --shadow-soft:0 10px 30px rgba(20,20,20,0.06);--shadow-card:0 8px 20px rgba(14,14,14,0.08);
    --shadow-floating:0 18px 40px rgba(15,15,15,0.08);--ease:cubic-bezier(.2,.9,.2,1);--card-float-y:-8px;
  }
  *{box-sizing:border-box}html,body{height:100%}body{
    margin:0;font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--ink);
    background:linear-gradient(180deg,var(--bg) 0%,#fffaf6 60%);-webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;line-height:1.45;padding-bottom:80px;
  }
  .container{max-width:var(--container-max);margin:0 auto;padding:32px 24px;}
  .impact-bar { background:linear-gradient(90deg, rgba(255,214,179,0.12), rgba(255,217,224,0.06)); border-bottom:1px solid rgba(255,155,179,0.06); color:var(--ink); padding:10px 16px; text-align:center; font-weight:700; font-size:15px; }

  .header{text-align:center;padding:40px 16px 24px;background:linear-gradient(180deg, rgba(255,155,179,0.14) 0%, rgba(255,214,179,0.04) 100%); border-bottom-left-radius:var(--radius-xl);border-bottom-right-radius:var(--radius-xl);margin-bottom:18px;}
  .site-title{font-family:"Patrick Hand","PatrickHand","Poppins",sans-serif;font-size:42px;margin:6px 0;color:var(--primary); display:inline-flex;align-items:center;gap:12px}
  .site-title .emoji{font-size:34px}
  .tagline-container { margin-top: 8px; }
  .tagline-title { font-family: "Patrick Hand", cursive; font-size: 28px; color: var(--primary); margin-bottom: 4px; }
  .tagline-subtitle { color: var(--muted-ink); font-weight: 500; font-size: 16px; }
  .top-actions{margin-top:18px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  .btn{display:inline-flex;align-items:center;gap:10px;padding:10px 18px;border-radius:12px;font-weight:600;cursor:pointer;
    transition:all .22s var(--ease);text-decoration:none;user-select:none}
  .btn-primary{background:linear-gradient(180deg,var(--primary),#ff6d8f);color:white;box-shadow:0 8px 24px rgba(255,110,140,0.18)}
  .btn-ghost{background:transparent;border:2px solid rgba(255,155,179,0.15);color:var(--ink)}

  .feature-cats{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin:18px 0}
  .cat-pill{background:linear-gradient(180deg,#fff,#fffaf6);padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,0.03);text-decoration:none;color:var(--ink);font-weight:700}

  .cards{margin:28px 0 48px 0;display:grid;gap:36px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));align-items:start}
  .card-link { text-decoration: none; color: inherit; display: block; }
  .card{background:var(--paper);border-radius:var(--radius-lg);overflow:visible;box-shadow:var(--shadow-card);
    display:flex;flex-direction:column;transition:transform .28s var(--ease),box-shadow .28s var(--ease);
    position:relative;min-height:320px;padding-bottom:8px}
  .card-illustration{height:210px;border-top-left-radius:inherit;border-top-right-radius:inherit;
    background:linear-gradient(180deg,var(--accent) 0%,rgba(255,255,255,0.6) 100%);
    display:flex;align-items:center;justify-content:center;padding:18px;box-shadow:inset 0 -10px 20px rgba(255,160,180,0.04);position:relative}
  .card-illustration svg{width:140px;height:140px;max-width:85%;max-height:85%;
    transition:transform .35s var(--ease),filter .25s var(--ease);transform-origin:center center;
    filter:drop-shadow(0 6px 18px rgba(14,14,14,0.06))}
  .card-illustration::after{content:"";position:absolute;left:10%;right:10%;bottom:-18px;height:26px;
    background:radial-gradient(ellipse at center, rgba(0,0,0,0.06), rgba(0,0,0,0.02));border-radius:999px;z-index:0}
  .card-body{padding:22px;display:flex;flex-direction:column;gap:12px;margin-top:auto;z-index:1}
  .card-title{font-family:"Patrick Hand","PatrickHand",cursive;font-size:22px;margin:0;color:var(--ink);text-align:center;line-height:1.15}
  .card-meta{color:var(--muted-ink);font-size:14px;text-align:center}
  .badge{font-weight:700;padding:6px 10px;border-radius:999px;background:var(--muted);color:var(--ink);font-size:13px}
  .badge-sale{background:linear-gradient(90deg,#ffe4e9,#ffd2e1);color:#7a2b3b}
  .badge-donate{background:linear-gradient(90deg,#fff6ec,#ffdcb2);color:#6a4d2a}

  /* Ensure the site simple chat (chat-helper) sits under the Fairy by default */
  .chat-helper{position:fixed;right:20px;bottom:22px;background:linear-gradient(180deg,#ffeef4,#fff7f5);
    border-radius:12px;width:300px;box-shadow:var(--shadow-floating);overflow:hidden;
    transition:transform .22s var(--ease),opacity .22s var(--ease); z-index:10001}
  .chat-helper .header{padding:10px 14px;background:transparent;display:flex;gap:10px;align-items:center;font-weight:700}
  .chat-helper .body{padding:12px 14px 18px;font-size:14px;color:var(--muted-ink)}

  .card:hover{transform:translateY(var(--card-float-y)) scale(1.01);box-shadow:0 20px 50px rgba(12,12,12,0.11)}
  .card:hover .card-illustration svg{transform:translateY(-6px) rotate(-2deg) scale(1.02);filter:drop-shadow(0 18px 36px rgba(14,14,14,0.09))}
  .btn-primary:hover{transform:translateY(-3px)}.btn-ghost:hover{transform:translateY(-2px);box-shadow:var(--shadow-soft)}
  @media (prefers-reduced-motion:reduce){.card,.card-illustration svg,.btn{transition:none!important;animation:none!important;transform:none!important}}
  .card{opacity:0;transform:translateY(12px) scale(1);animation:fadeUp .52s var(--ease) forwards}
  .cards .card:nth-child(1){animation-delay:.06s}.cards .card:nth-child(2){animation-delay:.12s}.cards .card:nth-child(3){animation-delay:.18s}
  @keyframes fadeUp{to{opacity:1;transform:translateY(0) scale(1)}}
  .footer{margin-top:40px;text-align:center;color:var(--muted-ink);font-size:13px;padding:28px 12px}
  @media (max-width:980px){.site-title{font-size:36px}.card-illustration{height:180px}.card{min-height:300px}}
  @media (max-width:720px){.site-title{font-size:30px}.container{padding:20px 16px}.cards{gap:20px;margin:28px 0}.card-illustration{height:160px;padding:14px}.card-illustration svg{width:120px;height:120px}.chat-helper{width:90%;left:5%;right:5%}}
  a:focus,button:focus,.btn:focus{outline:3px solid rgba(255,155,179,0.16);outline-offset:4px;border-radius:8px}

  /* --- New: testimonials + sticky donate --- */
  .testimonials { max-width:980px; margin: 18px auto 8px; padding: 18px 22px; background: linear-gradient(180deg, #fff, #fffaf6); border-radius:12px; box-shadow: var(--shadow-soft); text-align:center; }
  .testimonials h2 { margin: 0 0 8px; font-size:18px; color:var(--primary); }
  .testimonial-list { display:flex; gap:18px; justify-content:center; flex-wrap:wrap; margin-top:12px; }
  .testimonial { max-width:300px; font-style:italic; color:var(--muted-ink); background: rgba(255,255,255,0.7); padding:12px; border-radius:10px; border:1px solid rgba(0,0,0,0.03); }
  .testimonial strong { display:block; margin-top:8px; font-style:normal; color:var(--ink); font-weight:700; }

  /* Move donate to bottom-left so it never collides with right-corner widgets */
  .sticky-donate {
    position: fixed;
    left: 18px;
    right: auto;
    bottom: 22px;
    z-index:14000;
    border-radius:999px;
    padding:12px 16px;
    background:linear-gradient(180deg,var(--primary),#ff6d8f);
    color:#fff;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 12px 30px rgba(255,110,140,0.15);
    display:inline-flex;
    align-items:center;
    gap:10px;
  }
  .impact-small { font-weight:700; color:var(--primary); margin-top:8px; font-size:14px; }
  .sr-only{ position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px, 1px, 1px, 1px); white-space:nowrap; }

  /* On very small screens, move donate slightly up to avoid covering content */
  @media (max-width: 520px) {
    .sticky-donate {
      bottom: 120px;
      left: 12px;
      padding:10px 12px;
      font-size:14px;
    }
    .chat-helper { right: 12px; bottom: 22px; width: 92%; left: 4%; }
  }
</style>

</head>

<!-- FOMA Fairy: Offline AI chat bubble (thumbnails, list-item mailto + GitHub issue, personality) -->
<style>
  /* Floating bubble + chat window styles (kept compact) */
  .foma-fairy-button{position:fixed;right:20px;bottom:22px;width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#ff9aa2,#ffdde1);box-shadow:0 6px 18px rgba(0,0,0,.2);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:9999;border:none}
  .foma-fairy-button img{width:40px;height:40px}
  .foma-chat{position:fixed;right:20px;bottom:96px;width:360px;max-height:70vh;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(20,20,40,.18);z-index:9999;overflow:hidden;display:none;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
  .foma-chat.open{display:flex;flex-direction:column}
  .foma-header{background:linear-gradient(90deg,#ff9aa2,#ffdde1);color:#3b2b2b;padding:12px;display:flex;align-items:center;gap:8px}
  .foma-header .title{font-weight:700;font-size:15px}
  .foma-messages{padding:12px;overflow:auto;flex:1;background:linear-gradient(180deg,#fff,#fffaf8)}
  .msg{margin-bottom:10px;max-width:85%;line-height:1.35}
  .msg.ai{background:#fff;padding:8px 10px;border-radius:10px;box-shadow:0 1px 0 rgba(0,0,0,.04)}
  .msg.user{margin-left:auto;background:#ffefef;padding:8px 10px;border-radius:10px}
  .foma-input{display:flex;gap:8px;padding:10px;border-top:1px solid #f2e6e6;background:white}
  .foma-input input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #eee;outline:none;font-size:14px}
  .foma-input button{padding:8px 12px;border-radius:8px;border:none;background:#ff9aa2;color:white;cursor:pointer}
  .foma-suggests{display:flex;gap:8px;padding:10px;flex-wrap:wrap; border-top:1px solid #f7efef}
  .foma-chip{background:#fff6f6;padding:6px 8px;border-radius:999px;font-size:13px;cursor:pointer;border:1px solid #ffe6e6}
  .item-row{display:flex;gap:10px;align-items:flex-start;margin-top:8px}
  .item-row img{width:56px;height:56px;border-radius:8px;object-fit:cover;border:1px solid #f2e6e6}
  .item-meta{flex:1}
  .item-meta .title{font-weight:600}
  .item-actions{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}
  .foma-btn{padding:6px 8px;border-radius:8px;border:none;cursor:pointer}
  .foma-btn.mail{background:#4caf50;color:white}
  .foma-btn.github{background:#24292f;color:white}
  .typing{width:36px;height:16px;display:flex;gap:4px;align-items:center}
  .dot{width:6px;height:6px;background:#ccc;border-radius:50%;animation:blink 1s infinite}
  .dot:nth-child(2){animation-delay:.12s}.dot:nth-child(3){animation-delay:.24s}
  @keyframes blink{0%{opacity:.2}50%{opacity:1}100%{opacity:.2}}
  .small-muted{font-size:12px;color:#6b6b6b;margin-top:6px}
  .foma-footer-note{font-size:12px;color:#888;padding:8px 12px;border-top:1px solid #f7efef;background:#fffaf8}
</style>

<div class="foma-fairy-button" id="fomaToggle" aria-label="Open FOMA Fairy">
  <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'><path d='M12 2a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4zm0 12c-3.3 0-9 1.67-9 5v1h18v-1c0-3.33-5.7-5-9-5z'/></svg>" alt="FOMA Fairy">
</div>

<div class="foma-chat" id="fomaChat" role="dialog" aria-label="FOMA Fairy chat">
  <div class="foma-header">
    <div style="width:36px;height:36px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center">
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff6f91' width='18' height='18'><path d='M12 2a4 4 0 00-4 4 4 4 0 004 4 4 4 0 004-4 4 4 0 00-4-4zM6 14c0-1.66 3.58-3 6-3s6 1.34 6 3v2H6v-2z'/></svg>" alt="">
    </div>
    <div style="flex:1">
      <div class="title">FOMA Fairy</div>
      <div class="small-muted" id="fomaHint">Ask to give or get baby items — try "stroller" or "crib".</div>
    </div>
    <button style="background:transparent;border:none;cursor:pointer" id="fomaClose" aria-label="Close chat">✕</button>
  </div>

  <div class="foma-messages" id="fomaMessages" aria-live="polite"></div>

  <div class="foma-suggests" id="fomaSuggests" style="border-top:1px solid #f7efef">
    <div class="foma-chip" data-q="stroller">stroller</div>
    <div class="foma-chip" data-q="crib">crib</div>
    <div class="foma-chip" data-q="bottle">bottle</div>
    <div class="foma-chip" data-q="car seat">car seat</div>
    <div class="foma-chip" data-q="carrier">carrier</div>
  </div>

  <div class="foma-input" role="form" aria-label="FOMA input">
    <input id="fomaInput" placeholder="Try: 'I want a stroller' or 'I want to donate a crib'">
    <button id="fomaSend">Send</button>
  </div>

  <div class="foma-footer-note">Tip: click an item's **List** button to create a prefilled email or GitHub issue to contact the lister.</div>
</div>

<script>
(function(){
  /* ---------- CONFIG ---------- */
  // Replace this with your repo (owner/repo) if you'd like GitHub issue links to open
  const GITHUB_REPO = "gayagenius/foma-landing-page"; // or "" to disable GitHub flow

  // Choose personality: "playful" | "friendly" | "professional"
  const PERSONALITY = "playful";

  /* ---------- CATALOG (edit titles, thumbnails, tags, notes) ---------- */
  // Thumbnails are inline SVG data-URIs used as placeholders. Replace with real image URLs if available.
  const catalog = [
    {
      id: 1,
      title: "Chicco Lite Stroller (Gently-used)",
      tags: ["stroller","lightweight","city"],
      cond: "Good",
      notes: "Folds compactly; ideal for naps on walks.",
      thumbnail: svgThumb("#ffdcdc","#ff6f91","S")
    },
    {
      id: 2,
      title: "Graco Convertible Car Seat",
      tags: ["car seat","safety","infant"],
      cond: "Excellent",
      notes: "Up to 65 lbs; easy install.",
      thumbnail: svgThumb("#e6f7ff","#2b9af3","C")
    },
    {
      id: 3,
      title: "Wooden Baby Crib (IKEA)",
      tags: ["crib","bed","wooden"],
      cond: "Good",
      notes: "Slatted sides; mattress not included.",
      thumbnail: svgThumb("#fff7e6","#ffb74d","B")
    },
    {
      id: 4,
      title: "Nursing Pillow - SupportPro",
      tags: ["pillow","nursing","feeding"],
      cond: "Like-new",
      notes: "Removable cover; machine washable.",
      thumbnail: svgThumb("#f0fff4","#4caf50","P")
    },
    {
      id: 5,
      title: "Tommee Tippee Bottle Set",
      tags: ["bottle","feeding","newborn"],
      cond: "New",
      notes: "BPA-free, slow flow nipples.",
      thumbnail: svgThumb("#fff0f6","#ff4081","T")
    },
    {
      id: 6,
      title: "ErgoBaby Carrier",
      tags: ["carrier","wrap","babywearing"],
      cond: "Very Good",
      notes: "Ergonomic; supports newborns.",
      thumbnail: svgThumb("#f6f7ff","#6a6cff","E")
    }
  ];

  /* small helper to create an inline SVG thumbnail (colored circle with letter) */
  function svgThumb(bg, fg, letter){
    const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'><rect rx='12' width='120' height='120' fill='${bg}'/><circle cx='36' cy='36' r='28' fill='${fg}'/><text x='36' y='44' font-size='28' font-family='Arial' fill='white' text-anchor='middle'>${letter}</text></svg>`;
    return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
  }

  /* ---------- UI refs ---------- */
  const toggle = document.getElementById('fomaToggle');
  const chat = document.getElementById('fomaChat');
  const close = document.getElementById('fomaClose');
  const messages = document.getElementById('fomaMessages');
  const input = document.getElementById('fomaInput');
  const send = document.getElementById('fomaSend');
  const suggests = document.getElementById('fomaSuggests');
  const hint = document.getElementById('fomaHint');

  /* ---------- Personality messages ---------- */
  const VOICES = {
    playful: {
      greet: "Hey hey! I'm FOMA Fairy ✨ — I help people **give** or **get** baby items. Try 'stroller' or 'donate crib'.",
      notfound: "Hmm — couldn't find a perfect match in the mini-catalog. Try shorter keywords like **'stroller'** or **'bottle'**.",
      listIntro: "Nice choice! I can help you list this item — I'll compose a short message for email or GitHub."
    },
    friendly: {
      greet: "Hi — I'm the FOMA Fairy. I can help you find or list baby items. Try: 'I want a stroller' or 'I want to donate a crib'.",
      notfound: "I couldn't find an exact match in the small catalog. Try keywords like **stroller** or **crib**.",
      listIntro: "Great — I prepared a prefilled message you can send by email or open as a GitHub issue."
    },
    professional: {
      greet: "Hello. I am FOMA Fairy — an assistant to help list or locate baby items. Try: 'stroller' or 'donate crib'.",
      notfound: "No exact matches were found in the local catalog. Please try concise keywords such as **stroller** or **crib**.",
      listIntro: "Prepared a prefilled contact message; you may send it via email or create a GitHub issue."
    }
  };
  const voice = VOICES[PERSONALITY] || VOICES.friendy;

  /* ---------- helpers: UI messaging ---------- */
  function addMessage(html, who='ai'){
    const el = document.createElement('div');
    el.className = 'msg ' + (who === 'user' ? 'user' : 'ai');
    el.innerHTML = html;
    messages.appendChild(el);
    messages.scrollTop = messages.scrollHeight;
  }
  function showTyping(){
    const el = document.createElement('div');
    el.className = 'msg ai';
    el.innerHTML = `<div class="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>`;
    messages.appendChild(el);
    messages.scrollTop = messages.scrollHeight;
    return el;
  }

  /* ---------- matching & formatting ---------- */
  function scoreQuery(q, item){
    q = q.toLowerCase();
    const tokens = q.split(/\W+/).filter(Boolean);
    let score = 0;
    tokens.forEach(t => {
      if (item.title.toLowerCase().includes(t)) score += 3;
      if (item.tags.some(tag=> tag.includes(t))) score += 2;
      if (item.notes && item.notes.toLowerCase().includes(t)) score += 1;
      if (t.length > 3 && item.title.toLowerCase().includes(t)) score += 1;
    });
    if (/new|excellent|like-new/.test(item.cond.toLowerCase())) score += 0.5;
    return score;
  }

  function findMatches(q){
    const lowered = (q||'').toLowerCase();
    const intent = /donate|give|offering|selling|sell|i have|i'm giving/i.test(q) ? 'give' :
                   /get|want|need|looking for|find|search|i need|i want/i.test(q) ? 'get' : 'unknown';
    const scored = catalog.map(item => ({ item, score: scoreQuery(lowered, item) }));
    scored.sort((a,b)=> b.score - a.score);
    const top = scored.filter(s => s.score > 0).slice(0,6);
    return { intent, results: top.map(s=>s.item) };
  }

  function formatResults(results, intent){
    if (!results || results.length === 0){
      return { html: `<div>${voice.notfound}</div>`, followups: ["stroller","crib","bottle"] };
    }
    let html = `<div>${intent === 'give' ? 'Thanks for offering — here are some items you could list:' : 'Here are items that match your request:'}</div>`;
    results.slice(0,4).forEach(it=>{
      html += `
        <div class="item-row" data-id="${it.id}">
          <img src="${it.thumbnail}" alt="${escapeHtml(it.title)} thumbnail">
          <div class="item-meta">
            <div class="title">${escapeHtml(it.title)}</div>
            <div style="font-size:13px;color:#666">${escapeHtml(it.cond)} · ${escapeHtml(it.notes)}</div>
            <div class="item-actions">
              <button class="foma-btn mail" data-action="mail" data-id="${it.id}">Email lister</button>
              <button class="foma-btn github" data-action="github" data-id="${it.id}">Open GitHub issue</button>
            </div>
          </div>
        </div>
      `;
    });
    return { html, followups: results.slice(0,6).map(r=>r.title) };
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m]); });
  }

  /* ---------- respond ---------- */
  async function respond(q){
    const typingNode = showTyping();
    const delay = 400 + Math.min(1200,(q||'').length*18);
    await new Promise(r=>setTimeout(r,delay));

    const { intent, results } = findMatches(q);
    const formatted = formatResults(results, intent);
    messages.removeChild(typingNode);
    addMessage(formatted.html, 'ai');
    updateSuggests(formatted.followups);
  }

  /* ---------- suggestion chips ---------- */
  function updateSuggests(arr){
    suggests.innerHTML = '';
    arr = Array.isArray(arr) ? arr : ["stroller","crib","bottle"];
    arr.slice(0,6).forEach(a=>{
      const chip = document.createElement('div');
      chip.className = 'foma-chip';
      chip.textContent = a;
      chip.dataset.q = a;
      suggests.appendChild(chip);
    });
  }

  /* ---------- send handlers ---------- */
  function handleSend(){
    const text = input.value.trim();
    if (!text) return;
    addMessage(escapeHtml(text), 'user');
    input.value = '';
    respond(text);
  }
  send.addEventListener('click', handleSend);
  input.addEventListener('keydown', (e)=> { if (e.key === 'Enter') handleSend(); });

  suggests.addEventListener('click', (e)=>{
    const q = e.target.closest('.foma-chip')?.dataset?.q;
    if (!q) return;
    input.value = q;
    setTimeout(()=> { input.dispatchEvent(new KeyboardEvent('keydown',{key:'Enter'})); }, 120);
  });

  /* ---------- item action buttons (mailto + GitHub issue) ---------- */
  messages.addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-action]');
    if (!btn) return;
    const id = Number(btn.dataset.id);
    const item = catalog.find(i=>i.id === id);
    if (!item) return;
    const subject = encodeURIComponent(`Listing inquiry: ${item.title}`);
    const bodyText = `Hi —\n\nI'm interested in this item: ${item.title}\nCondition: ${item.cond}\nNotes: ${item.notes}\n\nCould you share availability and pickup/delivery details?\n\nThanks,\n[Your name]`;
    const body = encodeURIComponent(bodyText);

    if (btn.dataset.action === 'mail'){
      // open mailto
      const mailto = `mailto:?subject=${subject}&body=${body}`;
      window.open(mailto,'_blank');
    } else if (btn.dataset.action === 'github'){
      // open GitHub issue new URL if repo configured, otherwise fallback to mailto
      if (GITHUB_REPO && GITHUB_REPO.includes('/')){
        const ghTitle = subject;
        const ghBody = body;
        const issuesUrl = `https://github.com/${encodeURIComponent(GITHUB_REPO)}/issues/new?title=${ghTitle}&body=${ghBody}`;
        window.open(issuesUrl,'_blank');
      } else {
        // fallback
        const mailto = `mailto:?subject=${subject}&body=${body}`;
        window.open(mailto,'_blank');
      }
    }
  });

  /* ---------- open/close chat ---------- */
  toggle.addEventListener('click', openChat);
  close.addEventListener('click', closeChat);
  function openChat(){
    chat.classList.add('open');
    toggle.style.transform = 'scale(.95)';
    setTimeout(()=> toggle.style.transform = '',150);
    if (!chat.dataset.started) {
      chat.dataset.started = '1';
      addMessage(voice.greet, 'ai');
    }
    input.focus();
  }
  function closeChat(){ chat.classList.remove('open'); toggle.focus(); }

  /* ---------- initial minimal welcome (persist optional) ---------- */
  addMessage(voice.greet, 'ai');

  /* ---------- accessibility ---------- */
  document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') closeChat(); });

  /* ---------- expose dev helpers ---------- */
  window.fomaFairy = { open: openChat, close: closeChat, catalog, findMatches };

})();
</script>

<body>

  <!-- Impact bar -->
  <div class="impact-bar" role="status" aria-live="polite">
    💝 <span id="impactCount">325</span> families supported this year — join us in making a difference!
  </div>

  <header class="header" role="banner">
    <div class="container">
      <div class="site-title">
        <span class="emoji" aria-hidden="true"> 💝 </span> Welcome to FOMA
      </div>

      <div class="tagline-container">
        <h1 class="tagline-title">Where Pre-Loved Baby Treasures Find New Homes 💕</h1>
      
      </div>

      <div class="top-actions" role="navigation" aria-label="Primary actions">
        <a class="btn btn-primary" href="#items">Browse items</a>
        <a class="btn btn-ghost" href="donate.html">Donate</a>
      </div>

      <!-- small impact text under hero -->
     

      <!-- featured categories -->
      <div class="feature-cats" role="navigation" aria-label="Featured categories">
        <a class="cat-pill" href="bottles.html" target="_blank" rel="noopener">Bottles</a>
        <a class="cat-pill" href="feeding.html" target="_blank" rel="noopener">Feeding</a>
        <a class="cat-pill" href="onesies.html" target="_blank" rel="noopener">Onesies</a>
        <a class="cat-pill" href="toys.html" target="_blank" rel="noopener">Toys</a>
        <a class="cat-pill" href="bedding.html" target="_blank" rel="noopener">Bedding</a>
      </div>
    </div>
  </header>

  <main class="container" id="items" role="main">
    <section class="cards" aria-label="Featured items">
      <!-- CARD 1: Plush Teddy Bear -->
      <a href="teddy.html" class="card-link">
        <article class="card" aria-labelledby="item1-title">
          <div class="card-illustration" role="img" aria-label="Plush teddy illustration">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <circle cx="20" cy="16" r="8" fill="var(--primary)"/>
              <circle cx="44" cy="16" r="8" fill="var(--primary)"/>
              <circle cx="32" cy="36" r="20" fill="var(--accent)"/>
              <circle cx="26" cy="32" r="4" fill="var(--text)"/>
              <circle cx="38" cy="32" r="4" fill="var(--text)"/>
              <path d="M28 42c2.5 2 5.5 2 8 0" stroke="var(--text)" stroke-width="2" stroke-linecap="round"/>
              <circle cx="20" cy="54" r="6" fill="var(--primary)"/>
              <circle cx="44" cy="54" r="6" fill="var(--primary)"/>
            </svg>
          </div>
          <div class="card-body">
            <h3 id="item1-title" class="card-title">Plush Teddy Bear</h3>
            <div class="card-meta">Condition: Like New · <span class="badge badge-donate">Donate</span></div>
          </div>
        </article>
      </a>

      <!-- CARD 2: Feeding Bottle Set -->
      <a href="bottles.html" class="card-link">
        <article class="card" aria-labelledby="item2-title">
          <div class="card-illustration" role="img" aria-label="Feeding bottle illustration">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="20" y="12" width="24" height="40" rx="6" fill="var(--accent)" stroke="var(--primary)" stroke-width="2"/>
              <rect x="24" y="8" width="16" height="6" rx="2" fill="var(--primary)"/>
              <line x1="24" y1="20" x2="40" y2="20" stroke="var(--primary)" stroke-width="2"/>
              <line x1="24" y1="26" x2="40" y2="26" stroke="var(--primary)" stroke-width="2"/>
              <line x1="24" y1="32" x2="40" y2="32" stroke="var(--primary)" stroke-width="2"/>
              <line x1="24" y1="38" x2="40" y2="38" stroke="var(--primary)" stroke-width="2"/>
            </svg>
          </div>
          <div class="card-body">
            <h3 id="item2-title" class="card-title">Feeding Bottle Set</h3>
            <div class="card-meta">Condition: New · <span class="badge badge-sale">For Sale - $5</span></div>
          </div>
        </article>
      </a>

      <!-- CARD 3: Baby Onesies -->
      <a href="onesies.html" class="card-link">
        <article class="card" aria-labelledby="item3-title">
          <div class="card-illustration" role="img" aria-label="Onesie illustration">
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M16 8h32l4 8-8 8v16l8 12-8 4-8-12h-8l-8 12-8-4 8-12V24l-8-8z" fill="var(--accent)" stroke="var(--primary)" stroke-width="2"/>
              <circle cx="32" cy="28" r="4" fill="var(--primary)"/>
              <circle cx="32" cy="36" r="4" fill="var(--primary)"/>
            </svg>
          </div>
          <div class="card-body">
            <h3 id="item3-title" class="card-title">Baby Onesies (3-pack)</h3>
            <div class="card-meta">Condition: Gently Used · <span class="badge badge-donate">Donate</span></div>
          </div>
        </article>
      </a>
    </section>
  </main>

    <!-- Testimonials -->
  <section class="testimonials" aria-label="Testimonials">
    <h2>What people say</h2>
    <div class="testimonial-list">
      <div class="testimonial">"Foma made donating simple — I could tell the items were going to families who really needed them." <strong>- Alex</strong></div>
      <div class="testimonial">"I found exactly what I needed for my newborn — great quality and a lovely community." <strong>- Sarah</strong></div>
      <div class="testimonial">"Fast, friendly, and trustworthy. Highly recommend donating through FOMA." <strong>- David</strong></div>
    </div>
  </section>



  <!-- Sticky donate button (site-wide CTA) -->
  <a class="sticky-donate" href="donate.html" aria-label="Donate now">💗 Donate</a>
  

  <footer class="footer">Made with ❤️ — Charity Gaya</footer>

  <!-- Tiny JS: chat toggle + respectful reduced-motion handling -->
  <script>
    (function(){
      var toggle = document.getElementById('chatToggle');
      var body = document.getElementById('chatBody');
      var open = true;
      toggle.addEventListener('click', function(){ 
        open = !open; 
        body.style.display = open ? 'block' : 'none'; 
      });
      // respect reduced motion
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        document.documentElement.style.setProperty('--card-float-y','0px');
      }

      // Optional: small script to animate the impact number if you want
      (function animateImpact(){
        var el = document.getElementById('impactCount');
        if(!el) return;
        var start = 250; // starting value
        var end = 325;   // current stat shown
        var duration = 900;
        var startTime = performance.now();
        function tick(now){
          var t = Math.min(1, (now - startTime)/duration);
          var v = Math.floor(start + (end - start) * t);
          el.textContent = v;
          if(t < 1) requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);
      })();
    })();
  </script>
</body>
</html>
